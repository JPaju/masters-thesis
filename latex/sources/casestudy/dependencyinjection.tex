\begin{algorithm}

\begin{minted}{scala}
object Main:
  // Represents the whole program before its dependencies are provided
  val program: ZIO[ApikeyService, Nothing, Unit] = ???

  val run: ZIO[Any, Nothing, Unit] = program.provide(
    ApikeyService.layer,
    PostgresApikeyRepository.layer,
    KeyGen.layer,
    Database.dataSourceLayer,
  )
\end{minted}

\caption{Dependencies are provided in the main method of the application as \inlinecode{ZLayer}s. \label{casestudy:dependencyinjection}}
\end{algorithm}